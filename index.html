<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="utf-8"/>
<title>Simple Harmonic Calculator</title>
<style>
  body{font-family:Arial,Helvetica,sans-serif;margin:18px;background:#f7f9fb;color:#111}
  h1{margin-bottom:6px}
  .box{background:white;padding:12px;border-radius:8px;box-shadow:0 1px 4px rgba(0,0,0,0.08);margin-bottom:14px}
  h3{margin-top:0}
  label{display:inline-block;width:140px;font-weight:bold;font-size:0.9em}
  input[type="text"]{width:80px;padding:4px;border:1px solid #ddd;border-radius:4px;margin-right:4px}
  button{padding:8px 12px;margin:4px;background:#1677ff;color:white;border:none;border-radius:6px;cursor:pointer}
  button:hover{background:#0d5eff}
  .state-row{margin-bottom:12px;padding:10px;border:1px solid #e6eef6;border-radius:6px;background:#f9fcff}
  .vars-container{display:flex;flex-wrap:wrap}
  .var-group{display:inline-block;margin:4px 6px;vertical-align:top;min-width:160px}
  .warning{color:#b91c1c;font-weight:700}
  table{width:100%;border-collapse:collapse;margin-top:8px}
  td,th{border:1px solid #e6eef6;padding:6px;text-align:left}
  th{background:#f0f8ff}
  #result{display:none}
  select{width:120px;padding:4px}
  .hidden{display:none !important}
</style>
</head>
<body>
  <h1>üìò Simple Harmonic Motion Calculator</h1>

  <div class="box">
    <button onclick="showHelp()">üìñ ‡∏î‡∏π‡∏ß‡∏¥‡∏ò‡∏µ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</button>
    <button onclick="clearAll()">üßπ ‡∏•‡πâ‡∏≤‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
  </div>

  <div class="box">
    <h3>üìù ‡πÉ‡∏™‡πà‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</h3>
    <div>
      <label>‡∏£‡∏∞‡∏ö‡∏ö:</label>
      <select id="system" onchange="updateVisibility()">
        <option value="spring">‡∏™‡∏õ‡∏£‡∏¥‡∏á (Spring)</option>
        <option value="pendulum">‡∏•‡∏π‡∏Å‡∏ï‡∏∏‡πâ‡∏° (Pendulum)</option>
      </select>
    </div>
    <div id="stateContainer"></div>
    <br>
    <button onclick="calculate()">‚öôÔ∏è ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì</button>
  </div>

  <div id="result" class="box"></div>

<script>
const varLabels = {
  m: '‡∏°‡∏ß‡∏• m (kg)', 
  k: '‡∏™‡∏õ‡∏£‡∏¥‡∏á k (N/m)', 
  L: '‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏ß L (m)', 
  g: '‡πÅ‡∏£‡∏á‡πÇ‡∏ô‡πâ‡∏°‡∏ñ‡πà‡∏ß‡∏á g (m/s¬≤)', 
  sigmaF: '‡πÅ‡∏£‡∏á‡∏î‡∏∂‡∏á‡∏Å‡∏•‡∏±‡∏ö F (N)', 
  x: '‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏∞‡∏à‡∏±‡∏î x (m)', 
  v: '‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß v (m/s)', 
  Vmax: '‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î Vmax (m/s)', 
  a_max: '‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πà‡∏á‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î a_max (m/s¬≤)', 
  a: '‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πà‡∏á a (m/s¬≤)', 
  KE: '‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡∏à‡∏•‡∏ô‡πå KE (J)', 
  PE: '‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡∏®‡∏±‡∏Å‡∏¢‡πå PE (J)', 
  E: '‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡∏£‡∏ß‡∏° E (J)', 
  A: '‡πÅ‡∏≠‡∏°‡∏û‡∏•‡∏¥‡∏à‡∏π‡∏î A (m)', 
  omega: '‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏µ‡πà‡πÄ‡∏ä‡∏¥‡∏á‡∏°‡∏∏‡∏° œâ (rad/s)', 
  f: '‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏µ‡πà f (Hz)', 
  T: '‡∏Ñ‡∏≤‡∏ö T (s)', 
  Phi: '‡πÄ‡∏ü‡∏™‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î Œ¶ (rad)', 
  phi: '‡πÄ‡∏ü‡∏™‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô œÜ (rad)', 
  t: '‡πÄ‡∏ß‡∏•‡∏≤ t (s)'
};
const allVars = Object.keys(varLabels);

// Create form for input variables
function createStateRow() {
  const div = document.createElement('div');
  div.className = 'state-row';
  div.innerHTML = `<h4>‡∏™‡∏†‡∏≤‡∏ß‡∏∞‡πÄ‡∏î‡∏µ‡∏¢‡∏ß</h4><div class="vars-container"></div>`;
  const varsContainer = div.querySelector('.vars-container');
  allVars.forEach(key => {
    const group = document.createElement('div');
    group.className = 'var-group';
    const label = document.createElement('label');
    label.textContent = varLabels[key];
    const input = document.createElement('input');
    input.type = 'text';
    input.id = `state1_${key}`;
    group.appendChild(label);
    group.appendChild(input);
    varsContainer.appendChild(group);
  });
  return div;
}

document.getElementById('stateContainer').appendChild(createStateRow());
updateVisibility();

function showHelp() {
  alert(`üìò ‡∏ß‡∏¥‡∏ò‡∏µ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°\n\n1Ô∏è‚É£ ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏∞‡∏ö‡∏ö: ‡∏™‡∏õ‡∏£‡∏¥‡∏á ‡∏´‡∏£‡∏∑‡∏≠ ‡∏•‡∏π‡∏Å‡∏ï‡∏∏‡πâ‡∏°\n2Ô∏è‚É£ ‡πÉ‡∏™‡πà‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏ó‡∏£‡∏≤‡∏ö ‡πÄ‡∏ä‡πà‡∏ô m, k, L, g, A, x, v, t, phi\n3Ô∏è‚É£ ‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° "‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì"\n4Ô∏è‚É£ ‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°‡∏à‡∏∞‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏Ç‡∏≤‡∏î ‡πÄ‡∏ä‡πà‡∏ô T, f, œâ, E, KE, PE, Vmax, a_max ‡∏Ø‡∏•‡∏Ø\n\n‡πÄ‡∏Ñ‡∏•‡πá‡∏î‡∏•‡∏±‡∏ö:\n- ‡πÉ‡∏™‡πà‡∏Ñ‡πà‡∏≤ g = 9.81 ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏£‡∏∞‡∏ö‡∏∏ (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏•‡∏π‡∏Å‡∏ï‡∏∏‡πâ‡∏°)\n- ‡πÉ‡∏™‡πà A ‡πÅ‡∏•‡∏∞ phi ‡∏ñ‡πâ‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì x, v, a ‡∏ï‡∏≤‡∏°‡πÄ‡∏ß‡∏•‡∏≤\n- ‡πÉ‡∏ä‡πâ phi = 0 ‡∏ñ‡πâ‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏à‡∏≤‡∏Å‡∏™‡∏°‡∏î‡∏∏‡∏•, phi = œÄ/2 ‡∏ñ‡πâ‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏à‡∏≤‡∏Å‡πÅ‡∏≠‡∏°‡∏û‡∏•‡∏¥‡∏à‡∏π‡∏î`);
}

function clearAll() {
  document.querySelectorAll('input[type="text"]').forEach(i => i.value = '');
  document.getElementById('result').style.display = 'none';
}

function updateVisibility() {
  const system = document.getElementById('system').value;
  const isSpring = system === 'spring';
  allVars.forEach(key => {
    const input = document.getElementById(`state1_${key}`);
    const group = input ? input.parentElement : null;
    if (group) {
      if ((key === 'k' && !isSpring) || (key === 'L' && isSpring)) {
        group.classList.add('hidden');
      } else {
        group.classList.remove('hidden');
      }
    }
  });
}

function calculate() {
  const system = document.getElementById('system').value;
  const inputs = {};
  allVars.forEach(k => {
    const v = document.getElementById(`state1_${k}`).value;
    if (v.trim() !== '') inputs[k] = parseFloat(v);
  });

  let result = {...inputs};
  let explanation = '';

  // Default gravity for pendulum
  if (system === 'pendulum' && !result.g) {
    result.g = 9.81;
    explanation += `‡πÉ‡∏ä‡πâ g = 9.81 m/s¬≤ (‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô)\n`;
  }

  // Calculate omega, T, f
  if (system === 'spring') {
    const m = result.m, k = result.k;
    if (m && k) {
      result.omega = Math.sqrt(k / m);
      result.T = 2 * Math.PI / result.omega;
      result.f = 1 / result.T;
      explanation += `‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏õ‡∏£‡∏¥‡∏á: œâ = ‚àö(k/m) = ${result.omega.toFixed(4)} rad/s, T = 2œÄ/œâ = ${result.T.toFixed(4)} s, f = 1/T = ${result.f.toFixed(4)} Hz\n`;
    }
  } else if (system === 'pendulum') {
    const L = result.L, g = result.g || 9.81;
    if (L) {
      result.omega = Math.sqrt(g / L);
      result.T = 2 * Math.PI / result.omega;
      result.f = 1 / result.T;
      explanation += `‡∏•‡∏π‡∏Å‡∏ï‡∏∏‡πâ‡∏°: œâ = ‚àö(g/L) = ${result.omega.toFixed(4)} rad/s, T = 2œÄ/œâ = ${result.T.toFixed(4)} s, f = 1/T = ${result.f.toFixed(4)} Hz\n`;
    }
  }

  // Calculate maximum values
  if (result.omega && result.A) {
    result.Vmax = result.omega * result.A;
    result.a_max = result.omega * result.omega * result.A;
    explanation += `Vmax = œâA = ${result.Vmax.toFixed(4)} m/s, a_max = œâ¬≤A = ${result.a_max.toFixed(4)} m/s¬≤\n`;
  }

  // Calculate energy
  if (result.m && result.omega && result.A) {
    result.E = 0.5 * result.m * Math.pow(result.omega * result.A, 2);
    explanation += `‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡∏Å‡∏•‡∏£‡∏ß‡∏°: E = ¬Ω m (œâA)¬≤ = ${result.E.toFixed(4)} J\n`;
  }
  if (result.k && result.x !== undefined) {
    result.PE = 0.5 * result.k * Math.pow(result.x, 2);
    explanation += `‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡∏®‡∏±‡∏Å‡∏¢‡πå: PE = ¬Ω k x¬≤ = ${result.PE.toFixed(4)} J\n`;
  }
  if (result.m && result.v !== undefined) {
    result.KE = 0.5 * result.m * Math.pow(result.v, 2);
    explanation += `‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡∏à‡∏•‡∏ô‡πå: KE = ¬Ω m v¬≤ = ${result.KE.toFixed(4)} J\n`;
  }

  // Calculate force
  if (result.k && result.x !== undefined) {
    result.sigmaF = -result.k * result.x;
    explanation += `‡πÅ‡∏£‡∏á‡∏î‡∏∂‡∏á‡∏Å‡∏•‡∏±‡∏ö: F = -kx = ${result.sigmaF.toFixed(4)} N\n`;
  }

  // Calculate time-dependent quantities
  if (result.A && result.omega && result.t !== undefined && result.phi !== undefined) {
    result.Phi = result.omega * result.t + result.phi;
    result.x = result.A * Math.cos(result.Phi);
    result.v = -result.omega * result.A * Math.sin(result.Phi);
    result.a = -result.omega * result.omega * result.A * Math.cos(result.Phi);
    explanation += `‡πÄ‡∏ü‡∏™‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î: Œ¶ = œât + œÜ = ${result.Phi.toFixed(4)} rad\n`;
    explanation += `‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏∞‡∏à‡∏±‡∏î: x = A cos(Œ¶) = ${result.x.toFixed(4)} m\n`;
    explanation += `‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß: v = -œâA sin(Œ¶) = ${result.v.toFixed(4)} m/s\n`;
    explanation += `‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πà‡∏á: a = -œâ¬≤A cos(Œ¶) = ${result.a.toFixed(4)} m/s¬≤\n`;
  } else if (result.A && result.x !== undefined && result.omega) {
    // Calculate v and a based on displacement
    result.v = result.omega * Math.sqrt(Math.max(0, result.A * result.A - result.x * result.x));
    result.a = -result.omega * result.omega * result.x;
    explanation += `‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß: v = ¬±œâ‚àö(A¬≤ - x¬≤) = ${result.v.toFixed(4)} m/s\n`;
    explanation += `‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πà‡∏á: a = -œâ¬≤x = ${result.a.toFixed(4)} m/s¬≤\n`;
  }

  // Display results
  let html = `<h3>‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå (${system})</h3><table><tr>`;
  for (let key of allVars) html += `<th>${varLabels[key]}</th>`;
  html += `</tr><tr>`;
  for (let key of allVars) {
    const val = result[key];
    html += `<td>${val !== undefined && !isNaN(val) ? val.toFixed(4) : ''}</td>`;
  }
  html += `</tr></table><pre>${explanation}</pre>`;

  document.getElementById('result').innerHTML = html;
  document.getElementById('result').style.display = 'block';
}
</script>
</body>
</html>
