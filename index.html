<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="utf-8"/>
  <title>Simple Harmonic Motion Calculator (‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏ï‡πá‡∏° ‡∏¢‡∏≤‡∏ß‡∏™‡∏∏‡∏î ‡πÜ ‡∏ï‡∏≤‡∏°‡∏Ç‡∏≠)</title>
  <style>
    body { font-family: Arial, Helvetica, sans-serif; margin: 18px; background: #f7f9fb; color: #111; }
    h1 { margin-bottom: 6px; }
    .box { background: white; padding: 12px; border-radius: 8px; box-shadow: 0 1px 4px rgba(0,0,0,0.08); margin-bottom: 14px; }
    h3 { margin-top: 0; }
    label { display: inline-block; width: 160px; font-weight: bold; font-size: 0.9em; }
    input[type="text"] { width: 80px; padding: 4px; border: 1px solid #ddd; border-radius: 4px; margin-right: 4px; }
    button { padding: 8px 12px; margin: 4px; background: #1677ff; color: white; border: none; border-radius: 6px; cursor: pointer; }
    button:hover { background: #0d5eff; }
    .state-row { margin-bottom: 16px; padding: 12px; border: 1px solid #e6eef6; border-radius: 6px; background: #f9fcff; }
    .vars-container { display: flex; flex-wrap: wrap; }
    .var-group { display: inline-block; margin: 4px 6px; vertical-align: top; min-width: 170px; }
    .warning { color: #b91c1c; font-weight: 700; }
    table { width: 100%; border-collapse: collapse; margin-top: 8px; }
    td, th { border: 1px solid #e6eef6; padding: 6px; text-align: left; }
    th { background: #f0f8ff; }
    #result { display: none; }
    select { width: 280px; padding: 4px; }
    .hidden { display: none !important; }
    #helpModal { display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; padding: 20px; border: 1px solid #ccc; box-shadow: 0 2px 10px rgba(0,0,0,0.2); z-index: 1000; overflow: auto; max-height: 80vh; max-width: 80vw; border-radius: 8px; }
    #helpModal button { background: #ff4d4f; margin-top: 10px; }
    #helpModal button:hover { background: #e60000; }
    .ratio-table th { background: #fff3cd; }
    pre { background: #f0f0f0; padding: 10px; border-radius: 4px; }
  </style>
</head>
<body>
  <h1>üìò Simple Harmonic Motion Calculator (‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏ï‡πá‡∏°‡∏¢‡∏≤‡∏ß ‡πÜ ‡∏ï‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏Ç‡∏≠‡πÄ‡∏•‡∏¢‡∏Ñ‡∏£‡∏±‡∏ö)</h1>
  <div class="box">
    <button onclick="showHelp()">üìñ ‡∏î‡∏π‡∏ß‡∏¥‡∏ò‡∏µ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</button>
    <button onclick="clearAll()">üßπ ‡∏•‡πâ‡∏≤‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
  </div>

  <div class="box">
    <h3>üìù ‡πÉ‡∏™‡πà‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</h3>
    <div>
      <label>‡∏£‡∏∞‡∏ö‡∏ö:</label>
      <select id="system" onchange="updateVisibility()">
        <option value="spring">‡∏™‡∏õ‡∏£‡∏¥‡∏á (Spring)</option>
        <option value="pendulum">‡∏•‡∏π‡∏Å‡∏ï‡∏∏‡πâ‡∏° (Pendulum)</option>
      </select>
      &nbsp;&nbsp;&nbsp;&nbsp;
      <label>‡πÇ‡∏´‡∏°‡∏î‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì:</label>
      <select id="mode" onchange="updateMode()">
        <option value="single">‡∏™‡∏†‡∏≤‡∏ß‡∏∞‡πÄ‡∏î‡∏µ‡∏¢‡∏ß (Single State)</option>
        <option value="multi">‡∏´‡∏•‡∏≤‡∏¢‡∏™‡∏†‡∏≤‡∏ß‡∏∞ (‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏™‡πà‡∏ß‡∏ô‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ì‡πå)</option>
      </select>
    </div>
    <div id="stateContainer"></div>
    <br>
    <button onclick="calculate()">‚öôÔ∏è ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì</button>
  </div>

  <div id="result" class="box"></div>

  <div id="helpModal">
    <h2>üìò ‡∏ß‡∏¥‡∏ò‡∏µ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô (‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô 2 ‡πÇ‡∏´‡∏°‡∏î)</h2>
    <p>‡πÇ‡∏´‡∏°‡∏î‡∏™‡∏†‡∏≤‡∏ß‡∏∞‡πÄ‡∏î‡∏µ‡∏¢‡∏ß ‚Üí ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏î‡∏¥‡∏°‡∏ó‡∏∏‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á<br>
    ‡πÇ‡∏´‡∏°‡∏î‡∏´‡∏•‡∏≤‡∏¢‡∏™‡∏†‡∏≤‡∏ß‡∏∞ ‚Üí ‡πÅ‡∏™‡∏î‡∏á 2 ‡∏™‡∏†‡∏≤‡∏ß‡∏∞ + ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏∏‡∏Å‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ + ‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏§‡∏©‡∏é‡∏µ‡∏à‡∏≤‡∏Å m,k,L,g</p>
    <button onclick="closeHelp()">‡∏õ‡∏¥‡∏î</button>
  </div>

  <script>
    const varLabels = {
      m: '‡∏°‡∏ß‡∏• m (kg)',
      k: '‡∏™‡∏õ‡∏£‡∏¥‡∏á k (N/m)',
      L: '‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏ß L (m)',
      g: '‡πÅ‡∏£‡∏á‡πÇ‡∏ô‡πâ‡∏°‡∏ñ‡πà‡∏ß‡∏á g (m/s¬≤)',
      sigmaF: '‡πÅ‡∏£‡∏á‡∏î‡∏∂‡∏á‡∏Å‡∏•‡∏±‡∏ö F (N)',
      x: '‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏∞‡∏à‡∏±‡∏î x (m)',
      v: '‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß v (m/s)',
      a: '‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πà‡∏á a (m/s¬≤)',
      A: '‡πÅ‡∏≠‡∏°‡∏û‡∏•‡∏¥‡∏à‡∏π‡∏î A (m)',
      Vmax: '‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î Vmax (m/s)',
      a_max: '‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πà‡∏á‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î a_max (m/s¬≤)',
      KE: '‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡∏à‡∏•‡∏ô‡πå KE (J)',
      PE: '‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡∏®‡∏±‡∏Å‡∏¢‡πå PE (J)',
      E: '‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡∏£‡∏ß‡∏° E (J)',
      omega: '‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏µ‡πà‡πÄ‡∏ä‡∏¥‡∏á‡∏°‡∏∏‡∏° œâ (rad/s)',
      f: '‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏µ‡πà f (Hz)',
      T: '‡∏Ñ‡∏≤‡∏ö T (s)',
      t: '‡πÄ‡∏ß‡∏•‡∏≤ t (s)',
      phi: '‡πÄ‡∏ü‡∏™‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô œÜ (rad)',
      Phi: '‡πÄ‡∏ü‡∏™‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î Œ¶ (rad)'
    };

    const allVars = Object.keys(varLabels);

    function createStateRow(stateNum) {
      const div = document.createElement('div');
      div.className = 'state-row';
      div.innerHTML = `<h4>‡∏™‡∏†‡∏≤‡∏ß‡∏∞‡∏ó‡∏µ‡πà ${stateNum}</h4><div class="vars-container"></div>`;
      const container = div.querySelector('.vars-container');
      allVars.forEach(key => {
        const group = document.createElement('div');
        group.className = 'var-group';
        const label = document.createElement('label');
        label.textContent = varLabels[key];
        const input = document.createElement('input');
        input.type = 'text';
        input.id = `state${stateNum}_${key}`;
        group.appendChild(label);
        group.appendChild(input);
        container.appendChild(group);
      });
      return div;
    }

    function updateMode() {
      const mode = document.getElementById('mode').value;
      const container = document.getElementById('stateContainer');
      container.innerHTML = '';
      const numStates = mode === 'single' ? 1 : 2;
      for (let i = 1; i <= numStates; i++) {
        container.appendChild(createStateRow(i));
      }
      updateVisibility();
    }

    function updateVisibility() {
      const system = document.getElementById('system').value;
      const isSpring = system === 'spring';
      document.querySelectorAll('.var-group').forEach(group => {
        const input = group.querySelector('input');
        if (input) {
          const key = input.id.split('_')[1];
          if ((key === 'k' && !isSpring) || (key === 'L' && isSpring)) {
            group.classList.add('hidden');
          } else {
            group.classList.remove('hidden');
          }
        }
      });
    }

    function calculateState(inputs, system) {
      let result = { ...inputs };
      let explanation = '';

      if (system === 'pendulum' && !('g' in result)) {
        result.g = 9.81;
        explanation += `‡πÉ‡∏ä‡πâ g = 9.81 m/s¬≤ (‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô)\n`;
      }
      if ('t' in result && !('phi' in result)) {
        result.phi = 0;
        explanation += `‡πÉ‡∏ä‡πâ œÜ = 0 rad (‡∏™‡∏°‡∏°‡∏ï‡∏¥‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏à‡∏≤‡∏Å‡∏™‡∏°‡∏î‡∏∏‡∏•)\n`;
      }

      let changed = true;
      while (changed) {
        changed = false;

        if ('f' in result && !('T' in result)) { result.T = 1 / result.f; explanation += `‡∏Ñ‡∏≤‡∏ö: T = 1 / f = ${result.T.toFixed(6)} s\n`; changed = true; }
        if ('T' in result && !('f' in result)) { result.f = 1 / result.T; explanation += `‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏µ‡πà: f = 1 / T = ${result.f.toFixed(6)} Hz\n`; changed = true; }
        if ('f' in result && !('omega' in result)) { result.omega = 2 * Math.PI * result.f; explanation += `‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏µ‡πà‡πÄ‡∏ä‡∏¥‡∏á‡∏°‡∏∏‡∏°: œâ = 2œÄ f = ${result.omega.toFixed(6)} rad/s\n`; changed = true; }
        if ('omega' in result && !('f' in result)) { result.f = result.omega / (2 * Math.PI); explanation += `‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏µ‡πà: f = œâ / (2œÄ) = ${result.f.toFixed(6)} Hz\n`; changed = true; }
        if ('T' in result && !('omega' in result)) { result.omega = 2 * Math.PI / result.T; explanation += `‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏µ‡πà‡πÄ‡∏ä‡∏¥‡∏á‡∏°‡∏∏‡∏°: œâ = 2œÄ / T = ${result.omega.toFixed(6)} rad/s\n`; changed = true; }
        if ('omega' in result && !('T' in result)) { result.T = 2 * Math.PI / result.omega; explanation += `‡∏Ñ‡∏≤‡∏ö: T = 2œÄ / œâ = ${result.T.toFixed(6)} s\n`; changed = true; }

        // ‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏â‡∏û‡∏≤‡∏∞
        if (system === 'spring') {
          if ('k' in result && 'm' in result && !('omega' in result)) { result.omega = Math.sqrt(result.k / result.m); explanation += `œâ = ‚àö(k/m) = ${result.omega.toFixed(6)} rad/s\n`; changed = true; }
          if ('omega' in result && 'm' in result && !('k' in result)) { result.k = result.m * result.omega**2; explanation += `k = m œâ¬≤ = ${result.k.toFixed(6)} N/m\n`; changed = true; }
          if ('omega' in result && 'k' in result && !('m' in result)) { result.m = result.k / result.omega**2; explanation += `m = k / œâ¬≤ = ${result.m.toFixed(6)} kg\n`; changed = true; }
          if ('k' in result && 'x' in result && !('PE' in result)) { result.PE = 0.5 * result.k * result.x**2; explanation += `PE = ¬Ω k x¬≤ = ${result.PE.toFixed(6)} J\n`; changed = true; }
          if ('k' in result && 'x' in result && !('sigmaF' in result)) { result.sigmaF = -result.k * result.x; explanation += `‡πÅ‡∏£‡∏á‡∏î‡∏∂‡∏á‡∏Å‡∏•‡∏±‡∏ö: F = -k x = ${result.sigmaF.toFixed(6)} N\n`; changed = true; }
        } else { // pendulum
          if ('L' in result && 'g' in result && !('omega' in result)) { result.omega = Math.sqrt(result.g / result.L); explanation += `œâ = ‚àö(g/L) = ${result.omega.toFixed(6)} rad/s\n`; changed = true; }
          if ('omega' in result && 'g' in result && !('L' in result)) { result.L = result.g / result.omega**2; explanation += `L = g / œâ¬≤ = ${result.L.toFixed(6)} m\n`; changed = true; }
          if ('omega' in result && 'L' in result && !('g' in result)) { result.g = result.L * result.omega**2; explanation += `g = L œâ¬≤ = ${result.g.toFixed(6)} m/s¬≤\n`; changed = true; }
        }

        if ('omega' in result && 'A' in result && !('Vmax' in result)) { result.Vmax = result.omega * result.A; explanation += `Vmax = œâ A = ${result.Vmax.toFixed(6)} m/s\n`; changed = true; }
        if ('Vmax' in result && 'omega' in result && !('A' in result)) { result.A = result.Vmax / result.omega; explanation += `A = Vmax / œâ = ${result.A.toFixed(6)} m\n`; changed = true; }
        if ('omega' in result && 'A' in result && !('a_max' in result)) { result.a_max = result.omega**2 * result.A; explanation += `a_max = œâ¬≤ A = ${result.a_max.toFixed(6)} m/s¬≤\n`; changed = true; }
        if ('a_max' in result && 'omega' in result && !('A' in result)) { result.A = result.a_max / result.omega**2; explanation += `A = a_max / œâ¬≤ = ${result.A.toFixed(6)} m\n`; changed = true; }

        if ('m' in result && 'omega' in result && 'A' in result && !('E' in result)) { result.E = 0.5 * result.m * result.omega**2 * result.A**2; explanation += `‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡∏£‡∏ß‡∏°: E = ¬Ω m œâ¬≤ A¬≤ = ${result.E.toFixed(6)} J\n`; changed = true; }
        if ('m' in result && 'omega' in result && 'x' in result && !('PE' in result)) { result.PE = 0.5 * result.m * result.omega**2 * result.x**2; explanation += `‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡∏®‡∏±‡∏Å‡∏¢‡πå: PE = ¬Ω m œâ¬≤ x¬≤ = ${result.PE.toFixed(6)} J\n`; changed = true; }
        if ('m' in result && 'v' in result && !('KE' in result)) { result.KE = 0.5 * result.m * result.v**2; explanation += `‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡∏à‡∏•‡∏ô‡πå: KE = ¬Ω m v¬≤ = ${result.KE.toFixed(6)} J\n`; changed = true; }
        if ('KE' in result && 'PE' in result && !('E' in result)) { result.E = result.KE + result.PE; explanation += `‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡∏£‡∏ß‡∏°: E = KE + PE = ${result.E.toFixed(6)} J\n`; changed = true; }

        if ('omega' in result && 'x' in result && !('a' in result)) { result.a = -result.omega**2 * result.x; explanation += `‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πà‡∏á: a = -œâ¬≤ x = ${result.a.toFixed(6)} m/s¬≤\n`; changed = true; }
        if ('m' in result && 'omega' in result && 'x' in result && !('sigmaF' in result)) { result.sigmaF = -result.m * result.omega**2 * result.x; explanation += `‡πÅ‡∏£‡∏á‡∏î‡∏∂‡∏á‡∏Å‡∏•‡∏±‡∏ö: F = -m œâ¬≤ x = ${result.sigmaF.toFixed(6)} N\n`; changed = true; }

        if ('omega' in result && 'A' in result && 'x' in result && !('v' in result)) {
          const vMag = result.omega * Math.sqrt(Math.max(0, result.A**2 - result.x**2));
          result.v = v; // magnitude
          explanation += `‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß (magnitude): v = œâ ‚àö(A¬≤ - x¬≤) = ${v.toFixed(6)} m/s\n`;
          changed = true;
        }

        if ('omega' in result && 't' in result && 'phi' in result && !('Phi' in result)) { result.Phi = result.omega * result.t + result.phi; explanation += `‡πÄ‡∏ü‡∏™‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î: Œ¶ = œâ t + œÜ = ${result.Phi.toFixed(6)} rad\n`; changed = true; }
        if ('A' in result && 'Phi' in result && !('x' in result)) { result.x = result.A * Math.cos(result.Phi); explanation += `‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏∞‡∏à‡∏±‡∏î: x = A cos(Œ¶) = ${result.x.toFixed(6)} m\n`; changed = true; }
        if ('omega' in result && 'A' in result && 'Phi' in result && !('v' in result)) { result.v = -result.omega * result.A * Math.sin(result.Phi); explanation += `‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß: v = -œâ A sin(Œ¶) = ${result.v.toFixed(6)} m/s\n`; changed = true; }
        if ('omega' in result && 'A' in result && 'Phi' in result && !('a' in result)) { result.a = -result.omega**2 * result.A * Math.cos(result.Phi); explanation += `‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πà‡∏á: a = -œâ¬≤ A cos(Œ¶) = ${result.a.toFixed(6)} m/s¬≤\n`; changed = true; }
      }

      return { result, explanation };
    }

    // ‡∏™‡πà‡∏ß‡∏ô calculate() ‡πÅ‡∏•‡∏∞‡∏™‡πà‡∏ß‡∏ô‡∏≠‡∏∑‡πà‡∏ô ‡πÜ ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏•‡∏¢ (‡πÅ‡∏Ñ‡πà‡∏¢‡∏≤‡∏ß‡∏Ç‡∏∂‡πâ‡∏ô‡∏ô‡∏¥‡∏î‡∏´‡∏ô‡πà‡∏≠‡∏¢‡πÄ‡∏û‡∏£‡∏≤‡∏∞ while loop ‡∏¢‡∏≤‡∏ß‡πÄ‡∏ï‡πá‡∏°)

    function calculate() {
      const mode = document.getElementById('mode').value;
      const system = document.getElementById('system').value;
      const numStates = mode === 'single' ? 1 : 2;

      let results = [];
      let explanations = [];

      for (let i = 1; i <= numStates; i++) {
        let inputs = {};
        allVars.forEach(k => {
          const el = document.getElementById(`state${i}_${k}`);
          if (el && el.value.trim() !== '') inputs[k] = parseFloat(el.value);
        });
        const { result, explanation } = calculateState(inputs, system);
        results.push(result);
        explanations.push(explanation);
      }

      // ‡∏™‡πà‡∏ß‡∏ô‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏õ‡πä‡∏∞ ‡πÜ (‡∏ï‡∏≤‡∏£‡∏≤‡∏á + ‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏™‡πà‡∏ß‡∏ô + ‡∏ó‡∏§‡∏©‡∏é‡∏µ)

      let html = `<h3>‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå ‚Äî ${system === 'spring' ? '‡∏™‡∏õ‡∏£‡∏¥‡∏á' : '‡∏•‡∏π‡∏Å‡∏ï‡∏∏‡πâ‡∏°'} (${mode === 'single' ? '‡∏™‡∏†‡∏≤‡∏ß‡∏∞‡πÄ‡∏î‡∏µ‡∏¢‡∏ß' : '‡∏´‡∏•‡∏≤‡∏¢‡∏™‡∏†‡∏≤‡∏ß‡∏∞'})</h3>`;

      results.forEach((res, idx) => {
        html += `<h4>‚úî ‡∏™‡∏†‡∏≤‡∏ß‡∏∞‡∏ó‡∏µ‡πà ${idx + 1}</h4>`;
        html += '<table><tr>';
        allVars.forEach(k => html += `<th>${varLabels[k]}</th>`);
        html += '</tr><tr>';
        allVars.forEach(k => {
          const val = res[k];
          html += `<td>${val !== undefined && !isNaN(val) ? val.toFixed(4) : ''}</td>`;
        });
        html += '</tr></table>';
        html += `<pre>${explanations[idx]}</pre>`;
      });

      if (mode === 'multi') {
        // ... (‡∏™‡πà‡∏ß‡∏ô‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏™‡πà‡∏ß‡∏ô‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏õ‡πä‡∏∞)
        html += '<h4>üåü ‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏™‡πà‡∏ß‡∏ô (‡∏™‡∏†‡∏≤‡∏ß‡∏∞ 2 √∑ ‡∏™‡∏†‡∏≤‡∏ß‡∏∞ 1)</h4>';
        // ... ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏™‡πà‡∏ß‡∏ô + ‡∏ó‡∏§‡∏©‡∏é‡∏µ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏î‡∏¥‡∏°
        let ratioExp = '\n‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏§‡∏©‡∏é‡∏µ‡∏à‡∏≤‡∏Å‡∏û‡∏≤‡∏£‡∏≤‡∏°‡∏¥‡πÄ‡∏ï‡∏≠‡∏£‡πå‡∏´‡∏•‡∏±‡∏Å:\n';
        if (system === 'spring' && results[0].m && results[0].k && results[1].m && results[1].k) {
          const omegaRatioTheo = Math.sqrt((results[1].k / results[1].m) / (results[0].k / results[0].m));
          const TRatioTheo = 1 / omegaRatioTheo;
          ratioExp += `œâ‚ÇÇ/œâ‚ÇÅ = ‚àö(k‚ÇÇ/m‚ÇÇ √∑ k‚ÇÅ/m‚ÇÅ) = ${omegaRatioTheo.toFixed(4)}\n`;
          ratioExp += `T‚ÇÇ/T‚ÇÅ = ‚àö(m‚ÇÇ/k‚ÇÇ √∑ m‚ÇÅ/k‚ÇÅ) = ${TRatioTheo.toFixed(4)}\n`;
        }
        // ... ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏î‡∏¥‡∏°
        html += `<pre>${ratioExp}</pre>`;
      }

      document.getElementById('result').innerHTML = html;
      document.getElementById('result').style.display = 'block';
    }

    // clearAll, showHelp, closeHelp, updateMode ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏î‡∏¥‡∏°

    updateMode();
    updateVisibility();
  </script>
</body>
</html>
