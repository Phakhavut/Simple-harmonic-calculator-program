<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="utf-8"/>
  <title>Simple Harmonic Calculator</title>
  <style>
    body { font-family: Arial, Helvetica, sans-serif; margin: 18px; background: #f7f9fb; color: #111; }
    h1 { margin-bottom: 6px; }
    .box { background: white; padding: 12px; border-radius: 8px; box-shadow: 0 1px 4px rgba(0,0,0,0.08); margin-bottom: 14px; }
    h3 { margin-top: 0; }
    label { display: inline-block; width: 140px; font-weight: bold; font-size: 0.9em; }
    input[type="text"] { width: 80px; padding: 4px; border: 1px solid #ddd; border-radius: 4px; margin-right: 4px; }
    button { padding: 8px 12px; margin: 4px; background: #1677ff; color: white; border: none; border-radius: 6px; cursor: pointer; }
    button:hover { background: #0d5eff; }
    .state-row { margin-bottom: 12px; padding: 10px; border: 1px solid #e6eef6; border-radius: 6px; background: #f9fcff; }
    .vars-container { display: flex; flex-wrap: wrap; }
    .var-group { display: inline-block; margin: 4px 6px; vertical-align: top; min-width: 160px; }
    .warning { color: #b91c1c; font-weight: 700; }
    table { width: 100%; border-collapse: collapse; margin-top: 8px; }
    td, th { border: 1px solid #e6eef6; padding: 6px; text-align: left; }
    th { background: #f0f8ff; }
    #result { display: none; }
    select { width: 120px; padding: 4px; }
    .hidden { display: none !important; }
  </style>
</head>
<body>
  <h1>üìò Simple Harmonic Motion Calculator</h1>

  <div class="box">
    <button onclick="showHelp()">üìñ ‡∏î‡∏π‡∏ß‡∏¥‡∏ò‡∏µ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</button>
    <button onclick="clearAll()">üßπ ‡∏•‡πâ‡∏≤‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
  </div>

  <div class="box">
    <h3>üìù ‡πÉ‡∏™‡πà‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</h3>
    <div>
      <label>‡∏£‡∏∞‡∏ö‡∏ö:</label>
      <select id="system" onchange="updateVisibility()">
        <option value="spring">‡∏™‡∏õ‡∏£‡∏¥‡∏á (Spring)</option>
        <option value="pendulum">‡∏•‡∏π‡∏Å‡∏ï‡∏∏‡πâ‡∏° (Pendulum)</option>
      </select>
    </div>
    <div id="stateContainer"></div>
    <br>
    <button onclick="calculate()">‚öôÔ∏è ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì</button>
  </div>

  <div id="result" class="box"></div>

  <script>
    const varLabels = {
      // System parameters
      m: '‡∏°‡∏ß‡∏• m (kg)',
      k: '‡∏™‡∏õ‡∏£‡∏¥‡∏á k (N/m)',
      L: '‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏ß L (m)',
      g: '‡πÅ‡∏£‡∏á‡πÇ‡∏ô‡πâ‡∏°‡∏ñ‡πà‡∏ß‡∏á g (m/s¬≤)',
      // Motion parameters
      sigmaF: '‡πÅ‡∏£‡∏á‡∏î‡∏∂‡∏á‡∏Å‡∏•‡∏±‡∏ö F (N)',
      x: '‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏∞‡∏à‡∏±‡∏î x (m)',
      v: '‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß v (m/s)',
      a: '‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πà‡∏á a (m/s¬≤)',
      // Maximum values
      A: '‡πÅ‡∏≠‡∏°‡∏û‡∏•‡∏¥‡∏à‡∏π‡∏î A (m)',
      Vmax: '‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î Vmax (m/s)',
      a_max: '‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πà‡∏á‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î a_max (m/s¬≤)',
      // Energy
      KE: '‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡∏à‡∏•‡∏ô‡πå KE (J)',
      PE: '‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡∏®‡∏±‡∏Å‡∏¢‡πå PE (J)',
      E: '‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡∏£‡∏ß‡∏° E (J)',
      // Frequency parameters
      omega: '‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏µ‡πà‡πÄ‡∏ä‡∏¥‡∏á‡∏°‡∏∏‡∏° œâ (rad/s)',
      f: '‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏µ‡πà f (Hz)',
      T: '‡∏Ñ‡∏≤‡∏ö T (s)',
      // Phase and time
      t: '‡πÄ‡∏ß‡∏•‡∏≤ t (s)',
      phi: '‡πÄ‡∏ü‡∏™‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô œÜ (rad)',
      Phi: '‡πÄ‡∏ü‡∏™‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î Œ¶ (rad)'
    };
    const allVars = Object.keys(varLabels);

    // Function to create the input form
    function createStateRow() {
      const div = document.createElement('div');
      div.className = 'state-row';
      div.innerHTML = `<h4>‡∏™‡∏†‡∏≤‡∏ß‡∏∞‡πÄ‡∏î‡∏µ‡∏¢‡∏ß</h4><div class="vars-container"></div>`;
      const varsContainer = div.querySelector('.vars-container');
      allVars.forEach(key => {
        const group = document.createElement('div');
        group.className = 'var-group';
        const label = document.createElement('label');
        label.textContent = varLabels[key];
        const input = document.createElement('input');
        input.type = 'text';
        input.id = `state1_${key}`;
        group.appendChild(label);
        group.appendChild(input);
        varsContainer.appendChild(group);
      });
      return div;
    }

    document.getElementById('stateContainer').appendChild(createStateRow());
    updateVisibility();

    // Help function
    function showHelp() {
      alert(`üìò ‡∏ß‡∏¥‡∏ò‡∏µ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°\n\n1Ô∏è‚É£ ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏∞‡∏ö‡∏ö: ‡∏™‡∏õ‡∏£‡∏¥‡∏á ‡∏´‡∏£‡∏∑‡∏≠ ‡∏•‡∏π‡∏Å‡∏ï‡∏∏‡πâ‡∏°\n2Ô∏è‚É£ ‡πÉ‡∏™‡πà‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏ó‡∏£‡∏≤‡∏ö ‡πÄ‡∏ä‡πà‡∏ô m, k, L, g, A, x, v, t, phi\n3Ô∏è‚É£ ‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° "‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì"\n4Ô∏è‚É£ ‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°‡∏à‡∏∞‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏Ç‡∏≤‡∏î ‡πÄ‡∏ä‡πà‡∏ô T, f, œâ, E, KE, PE, Vmax, a_max ‡∏Ø‡∏•‡∏Ø\n\n‡πÄ‡∏Ñ‡∏•‡πá‡∏î‡∏•‡∏±‡∏ö:\n- ‡πÉ‡∏™‡πà‡∏Ñ‡πà‡∏≤ g = 9.81 ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏£‡∏∞‡∏ö‡∏∏ (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏•‡∏π‡∏Å‡∏ï‡∏∏‡πâ‡∏°)\n- ‡πÉ‡∏™‡πà A ‡πÅ‡∏•‡∏∞ phi ‡∏ñ‡πâ‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì x, v, a ‡∏ï‡∏≤‡∏°‡πÄ‡∏ß‡∏•‡∏≤\n- ‡πÉ‡∏ä‡πâ phi = 0 ‡∏ñ‡πâ‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏à‡∏≤‡∏Å‡∏™‡∏°‡∏î‡∏∏‡∏•, phi = œÄ/2 ‡∏ñ‡πâ‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏à‡∏≤‡∏Å‡πÅ‡∏≠‡∏°‡∏û‡∏•‡∏¥‡∏à‡∏π‡∏î\n- ‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°‡∏à‡∏∞‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏ó‡∏∏‡∏Å‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏õ‡πÑ‡∏î‡πâ‡∏à‡∏≤‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡πÉ‡∏´‡πâ`);
    }

    // Clear all inputs
    function clearAll() {
      document.querySelectorAll('input[type="text"]').forEach(i => i.value = '');
      document.getElementById('result').style.display = 'none';
    }

    // Update visibility based on system
    function updateVisibility() {
      const system = document.getElementById('system').value;
      const isSpring = system === 'spring';
      allVars.forEach(key => {
        const input = document.getElementById(`state1_${key}`);
        const group = input ? input.parentElement : null;
        if (group) {
          if ((key === 'k' && !isSpring) || (key === 'L' && isSpring)) {
            group.classList.add('hidden');
          } else {
            group.classList.remove('hidden');
          }
        }
      });
    }

    // Calculation function
    function calculate() {
      const system = document.getElementById('system').value;
      const inputs = {};
      allVars.forEach(k => {
        const v = document.getElementById(`state1_${k}`).value;
        if (v.trim() !== '') inputs[k] = parseFloat(v);
      });

      let result = { ...inputs };
      let explanation = '';

      if (system === 'pendulum' && !('g' in result)) {
        result.g = 9.81;
        explanation += `‡πÉ‡∏ä‡πâ g = 9.81 m/s¬≤ (‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô)\n`;
      }

      let changed = true;
      while (changed) {
        changed = false;

        // Frequency relations: f, T, omega
        if ('f' in result && !('T' in result)) {
          result.T = 1 / result.f;
          explanation += `‡∏Ñ‡∏≤‡∏ö: T = 1 / f = ${result.T.toFixed(4)} s\n`;
          changed = true;
        }
        if ('T' in result && !('f' in result)) {
          result.f = 1 / result.T;
          explanation += `‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏µ‡πà: f = 1 / T = ${result.f.toFixed(4)} Hz\n`;
          changed = true;
        }
        if ('f' in result && !('omega' in result)) {
          result.omega = 2 * Math.PI * result.f;
          explanation += `‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏µ‡πà‡πÄ‡∏ä‡∏¥‡∏á‡∏°‡∏∏‡∏°: œâ = 2œÄ f = ${result.omega.toFixed(4)} rad/s\n`;
          changed = true;
        }
        if ('omega' in result && !('f' in result)) {
          result.f = result.omega / (2 * Math.PI);
          explanation += `‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏µ‡πà: f = œâ / (2œÄ) = ${result.f.toFixed(4)} Hz\n`;
          changed = true;
        }
        if ('T' in result && !('omega' in result)) {
          result.omega = 2 * Math.PI / result.T;
          explanation += `‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏µ‡πà‡πÄ‡∏ä‡∏¥‡∏á‡∏°‡∏∏‡∏°: œâ = 2œÄ / T = ${result.omega.toFixed(4)} rad/s\n`;
          changed = true;
        }
        if ('omega' in result && !('T' in result)) {
          result.T = 2 * Math.PI / result.omega;
          explanation += `‡∏Ñ‡∏≤‡∏ö: T = 2œÄ / œâ = ${result.T.toFixed(4)} s\n`;
          changed = true;
        }

        // System-specific calculations
        if (system === 'spring') {
          if ('k' in result && 'm' in result && !('omega' in result)) {
            result.omega = Math.sqrt(result.k / result.m);
            explanation += `œâ = ‚àö(k/m) = ${result.omega.toFixed(4)} rad/s\n`;
            changed = true;
          }
          if ('omega' in result && 'm' in result && !('k' in result)) {
            result.k = result.m * Math.pow(result.omega, 2);
            explanation += `k = m œâ¬≤ = ${result.k.toFixed(4)} N/m\n`;
            changed = true;
          }
          if ('omega' in result && 'k' in result && !('m' in result)) {
            result.m = result.k / Math.pow(result.omega, 2);
            explanation += `m = k / œâ¬≤ = ${result.m.toFixed(4)} kg\n`;
            changed = true;
          }
          // Spring-specific PE and force if k is known
          if ('k' in result && 'x' in result && !('PE' in result)) {
            result.PE = 0.5 * result.k * Math.pow(result.x, 2);
            explanation += `PE = ¬Ω k x¬≤ = ${result.PE.toFixed(4)} J\n`;
            changed = true;
          }
          if ('k' in result && 'x' in result && !('sigmaF' in result)) {
            result.sigmaF = -result.k * result.x;
            explanation += `‡πÅ‡∏£‡∏á‡∏î‡∏∂‡∏á‡∏Å‡∏•‡∏±‡∏ö: F = -k x = ${result.sigmaF.toFixed(4)} N\n`;
            changed = true;
          }
        } else if (system === 'pendulum') {
          if ('L' in result && 'g' in result && !('omega' in result)) {
            result.omega = Math.sqrt(result.g / result.L);
            explanation += `œâ = ‚àö(g/L) = ${result.omega.toFixed(4)} rad/s\n`;
            changed = true;
          }
          if ('omega' in result && 'g' in result && !('L' in result)) {
            result.L = result.g / Math.pow(result.omega, 2);
            explanation += `L = g / œâ¬≤ = ${result.L.toFixed(4)} m\n`;
            changed = true;
          }
          if ('omega' in result && 'L' in result && !('g' in result)) {
            result.g = result.L * Math.pow(result.omega, 2);
            explanation += `g = L œâ¬≤ = ${result.g.toFixed(4)} m/s¬≤\n`;
            changed = true;
          }
        }

        // Maximum values
        if ('omega' in result && 'A' in result && !('Vmax' in result)) {
          result.Vmax = result.omega * result.A;
          explanation += `Vmax = œâ A = ${result.Vmax.toFixed(4)} m/s\n`;
          changed = true;
        }
        if ('Vmax' in result && 'omega' in result && !('A' in result)) {
          result.A = result.Vmax / result.omega;
          explanation += `A = Vmax / œâ = ${result.A.toFixed(4)} m\n`;
          changed = true;
        }
        if ('Vmax' in result && 'A' in result && !('omega' in result)) {
          result.omega = result.Vmax / result.A;
          explanation += `œâ = Vmax / A = ${result.omega.toFixed(4)} rad/s\n`;
          changed = true;
        }
        if ('omega' in result && 'A' in result && !('a_max' in result)) {
          result.a_max = Math.pow(result.omega, 2) * result.A;
          explanation += `a_max = œâ¬≤ A = ${result.a_max.toFixed(4)} m/s¬≤\n`;
          changed = true;
        }
        if ('a_max' in result && 'omega' in result && !('A' in result)) {
          result.A = result.a_max / Math.pow(result.omega, 2);
          explanation += `A = a_max / œâ¬≤ = ${result.A.toFixed(4)} m\n`;
          changed = true;
        }
        if ('a_max' in result && 'A' in result && !('omega' in result)) {
          result.omega = Math.sqrt(result.a_max / result.A);
          explanation += `œâ = ‚àö(a_max / A) = ${result.omega.toFixed(4)} rad/s\n`;
          changed = true;
        }

        // Energy calculations (general SHM form)
        if ('m' in result && 'omega' in result && 'A' in result && !('E' in result)) {
          result.E = 0.5 * result.m * Math.pow(result.omega, 2) * Math.pow(result.A, 2);
          explanation += `‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡∏£‡∏ß‡∏°: E = ¬Ω m œâ¬≤ A¬≤ = ${result.E.toFixed(4)} J\n`;
          changed = true;
        }
        if ('E' in result && 'm' in result && 'omega' in result && !('A' in result)) {
          result.A = Math.sqrt(2 * result.E / (result.m * Math.pow(result.omega, 2)));
          explanation += `A = ‚àö(2 E / (m œâ¬≤)) = ${result.A.toFixed(4)} m\n`;
          changed = true;
        }
        if ('m' in result && 'omega' in result && 'x' in result && !('PE' in result)) {
          result.PE = 0.5 * result.m * Math.pow(result.omega, 2) * Math.pow(result.x, 2);
          explanation += `‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡∏®‡∏±‡∏Å‡∏¢‡πå: PE = ¬Ω m œâ¬≤ x¬≤ = ${result.PE.toFixed(4)} J\n`;
          changed = true;
        }
        if ('PE' in result && 'm' in result && 'omega' in result && !('x' in result)) {
          result.x = Math.sqrt(2 * result.PE / (result.m * Math.pow(result.omega, 2)));
          explanation += `x = ‚àö(2 PE / (m œâ¬≤)) = ${result.x.toFixed(4)} m (assuming positive)\n`;
          changed = true;
        }
        if ('m' in result && 'v' in result && !('KE' in result)) {
          result.KE = 0.5 * result.m * Math.pow(result.v, 2);
          explanation += `‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡∏à‡∏•‡∏ô‡πå: KE = ¬Ω m v¬≤ = ${result.KE.toFixed(4)} J\n`;
          changed = true;
        }
        if ('KE' in result && 'm' in result && !('v' in result)) {
          result.v = Math.sqrt(2 * result.KE / result.m);
          explanation += `v = ‚àö(2 KE / m) = ${result.v.toFixed(4)} m/s (assuming positive direction)\n`;
          changed = true;
        }
        if ('KE' in result && 'PE' in result && !('E' in result)) {
          result.E = result.KE + result.PE;
          explanation += `‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡∏£‡∏ß‡∏°: E = KE + PE = ${result.E.toFixed(4)} J\n`;
          changed = true;
        }
        if ('E' in result && 'KE' in result && !('PE' in result)) {
          result.PE = result.E - result.KE;
          explanation += `PE = E - KE = ${result.PE.toFixed(4)} J\n`;
          changed = true;
        }
        if ('E' in result && 'PE' in result && !('KE' in result)) {
          result.KE = result.E - result.PE;
          explanation += `KE = E - PE = ${result.KE.toFixed(4)} J\n`;
          changed = true;
        }

        // Acceleration and force
        if ('omega' in result && 'x' in result && !('a' in result)) {
          result.a = -Math.pow(result.omega, 2) * result.x;
          explanation += `‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πà‡∏á: a = -œâ¬≤ x = ${result.a.toFixed(4)} m/s¬≤\n`;
          changed = true;
        }
        if ('a' in result && 'omega' in result && !('x' in result)) {
          result.x = -result.a / Math.pow(result.omega, 2);
          explanation += `x = -a / œâ¬≤ = ${result.x.toFixed(4)} m\n`;
          changed = true;
        }
        if ('m' in result && 'omega' in result && 'x' in result && !('sigmaF' in result)) {
          result.sigmaF = -result.m * Math.pow(result.omega, 2) * result.x;
          explanation += `‡πÅ‡∏£‡∏á‡∏î‡∏∂‡∏á‡∏Å‡∏•‡∏±‡∏ö: F = -m œâ¬≤ x = ${result.sigmaF.toFixed(4)} N\n`;
          changed = true;
        }
        if ('sigmaF' in result && 'm' in result && !('a' in result)) {
          result.a = result.sigmaF / result.m;
          explanation += `a = F / m = ${result.a.toFixed(4)} m/s¬≤\n`;
          changed = true;
        }

        // Displacement-based velocity
        if ('omega' in result && 'A' in result && 'x' in result && !('v' in result)) {
          result.v = result.omega * Math.sqrt(Math.max(0, Math.pow(result.A, 2) - Math.pow(result.x, 2)));
          explanation += `‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß: v = œâ ‚àö(A¬≤ - x¬≤) = ${result.v.toFixed(4)} m/s (magnitude)\n`;
          changed = true;
        }
        if ('v' in result && 'omega' in result && 'x' in result && !('A' in result)) {
          result.A = Math.sqrt(Math.pow(result.v / result.omega, 2) + Math.pow(result.x, 2));
          explanation += `A = ‚àö((v/œâ)¬≤ + x¬≤) = ${result.A.toFixed(4)} m\n`;
          changed = true;
        }

        // Time-dependent calculations
        if ('omega' in result && 't' in result && 'phi' in result && !('Phi' in result)) {
          result.Phi = result.omega * result.t + result.phi;
          explanation += `‡πÄ‡∏ü‡∏™‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î: Œ¶ = œâ t + œÜ = ${result.Phi.toFixed(4)} rad\n`;
          changed = true;
        }
        if ('omega' in result && 't' in result && 'Phi' in result && !('phi' in result)) {
          result.phi = result.Phi - result.omega * result.t;
          explanation += `œÜ = Œ¶ - œâ t = ${result.phi.toFixed(4)} rad\n`;
          changed = true;
        }
        if ('omega' in result && 'phi' in result && 'Phi' in result && !('t' in result)) {
          result.t = (result.Phi - result.phi) / result.omega;
          explanation += `t = (Œ¶ - œÜ) / œâ = ${result.t.toFixed(4)} s\n`;
          changed = true;
        }
        if ('A' in result && 'Phi' in result && !('x' in result)) {
          result.x = result.A * Math.cos(result.Phi);
          explanation += `‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏∞‡∏à‡∏±‡∏î: x = A cos(Œ¶) = ${result.x.toFixed(4)} m\n`;
          changed = true;
        }
        if ('omega' in result && 'A' in result && 'Phi' in result && !('v' in result)) {
          result.v = -result.omega * result.A * Math.sin(result.Phi);
          explanation += `‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß: v = -œâ A sin(Œ¶) = ${result.v.toFixed(4)} m/s\n`;
          changed = true;
        }
        if ('omega' in result && 'A' in result && 'Phi' in result && !('a' in result)) {
          result.a = -Math.pow(result.omega, 2) * result.A * Math.cos(result.Phi);
          explanation += `‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πà‡∏á: a = -œâ¬≤ A cos(Œ¶) = ${result.a.toFixed(4)} m/s¬≤\n`;
          changed = true;
        }
        // Inverse phase from x and A (preliminary)
        if ('x' in result && 'A' in result && !('Phi' in result)) {
          let cosPhi = result.x / result.A;
          if (Math.abs(cosPhi) <= 1) {
            let phiCandidate = Math.acos(cosPhi);
            result.Phi = phiCandidate;
            explanation += `Œ¶ = acos(x / A) = ${result.Phi.toFixed(4)} rad (preliminary; may adjust with v)\n`;
            changed = true;
          }
        }
        // Adjust phase sign based on v
        if ('v' in result && 'omega' in result && 'A' in result && 'Phi' in result) {
          let expectedV = -result.omega * result.A * Math.sin(result.Phi);
          if (Math.sign(expectedV) !== Math.sign(result.v) && Math.sign(result.v) !== 0) {
            result.Phi = -result.Phi;
            explanation += `Adjusted Œ¶ = -acos(x / A) = ${result.Phi.toFixed(4)} rad to match v sign\n`;
            changed = true;
          }
        }
      }

      // Display results in table
      let html = `<h3>‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå (${system})</h3><table><tr>`;
      for (let key of allVars) html += `<th>${varLabels[key]}</th>`;
      html += `</tr><tr>`;
      for (let key of allVars) {
        const val = result[key];
        html += `<td>${val !== undefined && !isNaN(val) ? val.toFixed(4) : ''}</td>`;
      }
      html += `</tr></table><pre>${explanation}</pre>`;

      document.getElementById('result').innerHTML = html;
      document.getElementById('result').style.display = 'block';
    }
  </script>
</body>
</html>
