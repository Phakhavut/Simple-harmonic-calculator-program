<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="utf-8"/>
<title>Simple Harmonic Motion Calculator (Full)</title>
<style>
  body{font-family:Arial,Helvetica,sans-serif;margin:18px;background:#f7f9fb;color:#111}
  h1{margin-bottom:6px}
  .box{background:white;padding:12px;border-radius:8px;box-shadow:0 1px 4px rgba(0,0,0,0.08);margin-bottom:14px}
  label{display:inline-block;width:140px;font-weight:bold;font-size:0.9em}
  input[type="text"]{width:80px;padding:4px;border:1px solid #ddd;border-radius:4px;margin-right:4px}
  button{padding:8px 12px;margin:4px;background:#1677ff;color:white;border:none;border-radius:6px;cursor:pointer}
  button:hover{background:#0d5eff}
  .vars-container{display:flex;flex-wrap:wrap}
  .var-group{display:inline-block;margin:4px 6px;vertical-align:top;min-width:160px}
  table{width:100%;border-collapse:collapse;margin-top:8px}
  td,th{border:1px solid #e6eef6;padding:6px;text-align:left}
  th{background:#f0f8ff}
  .hidden{display:none !important}
</style>
</head>
<body>
<h1>üìò Simple Harmonic Motion Calculator</h1>

<div class="box">
  <button onclick="showHelp()">üìñ ‡∏ß‡∏¥‡∏ò‡∏µ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</button>
  <button onclick="clearAll()">üßπ ‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</button>
</div>

<div class="box">
  <h3>üßÆ ‡∏õ‡πâ‡∏≠‡∏ô‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏ó‡∏£‡∏≤‡∏ö</h3>
  <div>
    <label>‡∏£‡∏∞‡∏ö‡∏ö:</label>
    <select id="system" onchange="updateVisibility()">
      <option value="spring">‡∏™‡∏õ‡∏£‡∏¥‡∏á (Spring)</option>
      <option value="pendulum">‡∏•‡∏π‡∏Å‡∏ï‡∏∏‡πâ‡∏° (Pendulum)</option>
    </select>
  </div><br>
  <div id="vars" class="vars-container"></div>
  <br>
  <button onclick="calculate()">‚öôÔ∏è ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì</button>
</div>

<div id="result" class="box" style="display:none;"></div>

<script>
const allVars = ["m","k","L","g","sigmaF","x","v","Vmax","a_max","a",
  "KE","PE","E","A","omega","f","T","Phi","t"];

const labels = {
  m:"‡∏°‡∏ß‡∏• m (kg)", k:"‡∏™‡∏õ‡∏£‡∏¥‡∏á k (N/m)", L:"‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏ß L (m)", g:"‡πÅ‡∏£‡∏á‡πÇ‡∏ô‡πâ‡∏°‡∏ñ‡πà‡∏ß‡∏á g (m/s¬≤)",
  sigmaF:"Œ£F (N)", x:"‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏∞‡∏à‡∏±‡∏î x (m)", v:"‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß v (m/s)", Vmax:"Vmax (m/s)",
  a_max:"a_max (m/s¬≤)", a:"‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πà‡∏á a (m/s¬≤)", KE:"‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡∏à‡∏•‡∏ô‡πå KE (J)",
  PE:"‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡∏®‡∏±‡∏Å‡∏¢‡πå PE (J)", E:"‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡∏£‡∏ß‡∏° E (J)", A:"‡πÅ‡∏≠‡∏°‡∏û‡∏•‡∏¥‡∏à‡∏π‡∏î A (m)",
  omega:"‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏µ‡πà‡πÄ‡∏ä‡∏¥‡∏á‡∏°‡∏∏‡∏° œâ (rad/s)", f:"‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏µ‡πà f (Hz)", T:"‡∏Ñ‡∏≤‡∏ö T (s)",
  Phi:"‡πÄ‡∏ü‡∏™ Œ¶ (rad)", t:"‡πÄ‡∏ß‡∏•‡∏≤ t (s)"
};

const varsDiv = document.getElementById("vars");
allVars.forEach(v=>{
  const g = document.createElement("div");
  g.className = "var-group";
  g.innerHTML = `<label>${labels[v]}</label><input id="in_${v}" type="text">`;
  varsDiv.appendChild(g);
});

function showHelp(){
  alert(`üìò ‡∏ß‡∏¥‡∏ò‡∏µ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô\n\n1Ô∏è‚É£ ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏∞‡∏ö‡∏ö: ‡∏™‡∏õ‡∏£‡∏¥‡∏á ‡∏´‡∏£‡∏∑‡∏≠ ‡∏•‡∏π‡∏Å‡∏ï‡∏∏‡πâ‡∏°\n2Ô∏è‚É£ ‡πÉ‡∏™‡πà‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏ó‡∏£‡∏≤‡∏ö ‡πÄ‡∏ä‡πà‡∏ô m, k, L, A, T, t, Œ¶\n3Ô∏è‚É£ ‡∏Å‡∏î "‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì" ‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°‡∏à‡∏∞‡πÄ‡∏ï‡∏¥‡∏°‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏Ç‡∏≤‡∏î‡∏ï‡∏≤‡∏°‡∏™‡∏π‡∏ï‡∏£ SHM\n\n‡∏™‡∏π‡∏ï‡∏£‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ:\n- œâ = ‚àö(k/m) (‡∏™‡∏õ‡∏£‡∏¥‡∏á), œâ = ‚àö(g/L) (‡∏•‡∏π‡∏Å‡∏ï‡∏∏‡πâ‡∏°)\n- T = 2œÄ/œâ, f = 1/T\n- x = A cos(œât + Œ¶)\n- v = -œâA sin(œât + Œ¶)\n- a = -œâ¬≤A cos(œât + Œ¶)\n- KE = ¬Ω m v¬≤, PE = ¬Ω k x¬≤, E = KE + PE`);
}

function clearAll(){
  document.querySelectorAll("input").forEach(i=>i.value="");
  document.getElementById("result").style.display="none";
}

function updateVisibility(){
  const system = document.getElementById("system").value;
  const isSpring = system==="spring";
  ["k","L"].forEach(k=>{
    const el=document.getElementById("in_"+k).parentElement;
    if(k==="k"&&!isSpring || k==="L"&&isSpring) el.classList.add("hidden");
    else el.classList.remove("hidden");
  });
}

function calculate(){
  const sys = document.getElementById("system").value;
  let s = {};
  allVars.forEach(v=>{
    const val = parseFloat(document.getElementById("in_"+v).value);
    if(!isNaN(val)) s[v]=val;
  });

  // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô
  if(!s.g) s.g=9.81;

  // ‡πÄ‡∏£‡∏¥‡πà‡∏° iterative ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì
  for(let i=0;i<8;i++){
    // 1. ‡∏Ñ‡∏≤‡∏ö / ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏µ‡πà / œâ
    if(!s.omega){
      if(s.T) s.omega = 2*Math.PI/s.T;
      else if(s.f) s.omega = 2*Math.PI*s.f;
      else if(sys==="spring"&&s.k&&s.m) s.omega=Math.sqrt(s.k/s.m);
      else if(sys==="pendulum"&&s.g&&s.L) s.omega=Math.sqrt(s.g/s.L);
    }
    if(!s.T && s.omega) s.T = 2*Math.PI/s.omega;
    if(!s.f && s.T) s.f = 1/s.T;

    // 2. k, m, L
    if(sys==="spring"){
      if(!s.k && s.m && s.omega) s.k = s.m*s.omega**2;
      if(!s.m && s.k && s.omega) s.m = s.k/s.omega**2;
    }else{
      if(!s.L && s.g && s.omega) s.L = s.g/s.omega**2;
    }

    // 3. Vmax, a_max
    if(s.A && s.omega){
      if(!s.Vmax) s.Vmax = s.omega*s.A;
      if(!s.a_max) s.a_max = s.omega**2*s.A;
    }

    // 4. ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡πÄ‡∏ß‡∏•‡∏≤‡πÅ‡∏•‡∏∞‡πÄ‡∏ü‡∏™
    if(s.A && s.omega && (s.t!==undefined || s.Phi!==undefined)){
      const phi = s.Phi||0;
      const t = s.t||0;
      s.x = s.A*Math.cos(s.omega*t+phi);
      s.v = -s.omega*s.A*Math.sin(s.omega*t+phi);
      s.a = -s.omega**2*s.A*Math.cos(s.omega*t+phi);
    }

    // 5. ‡∏à‡∏≤‡∏Å x ‡∏´‡∏≤ a,v ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡∏ö‡∏≤‡∏á‡∏™‡πà‡∏ß‡∏ô
    if(s.A && s.x!==undefined && s.omega){
      if(!s.v) s.v = s.omega*Math.sqrt(Math.max(0,s.A**2-s.x**2));
      if(!s.a) s.a = -s.omega**2*s.x;
    }

    // 6. ‡πÅ‡∏£‡∏á‡∏î‡∏∂‡∏á‡∏Å‡∏•‡∏±‡∏ö Œ£F
    if(sys==="spring" && s.k && s.x!==undefined) s.sigmaF = -s.k*s.x;
    else if(sys==="pendulum" && s.m && s.g) s.sigmaF = s.m*s.g;

    // 7. ‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô
    if(sys==="spring"){
      if(!s.PE && s.k && s.x!==undefined) s.PE = 0.5*s.k*s.x**2;
      if(!s.E && s.k && s.A) s.E = 0.5*s.k*s.A**2;
    }else if(sys==="pendulum"){
      if(!s.PE && s.m && s.g && s.L && s.x!==undefined)
        s.PE = s.m*s.g*(1-Math.cos(s.x/s.L)); // approx
      if(!s.E && s.m && s.omega && s.A)
        s.E = 0.5*s.m*(s.omega*s.A)**2;
    }
    if(!s.KE && s.m && s.v) s.KE = 0.5*s.m*s.v**2;
    if(!s.E && s.KE && s.PE) s.E = s.KE + s.PE;
  }

  // ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•
  let html=`<h3>‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå (${sys})</h3><table><tr>`;
  for(const k of allVars) html+=`<th>${labels[k]}</th>`;
  html+='</tr><tr>';
  for(const k of allVars){
    const v=s[k];
    html+=`<td>${v!==undefined&&!isNaN(v)?v.toFixed(6):''}</td>`;
  }
  html+='</tr></table>';
  document.getElementById("result").innerHTML=html;
  document.getElementById("result").style.display="block";
}
updateVisibility();
</script>
</body>
</html>
